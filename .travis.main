#!/bin/bash
set -ex

. /opt/ceh/scripts/ceh-profile.sh

doTest() {
  cd $1
  cabal install --user --only-dependencies --enable-tests
  cabal configure --user --enable-tests
  cabal build
  cabal test
  cabal install --user --enable-tests #Reuse the settings of configuration
  cd -
}

cabal update

doTest Cabal
doTest cabal-install
